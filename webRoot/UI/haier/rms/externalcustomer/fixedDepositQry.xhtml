<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:fn="http://java.sun.com/jsp/jstl/functions"
                template="/templates/ui.xhtml">

<ui:define name="head">
    <style type="text/css">
        .col-95 {
            width: 95%;
        }

        .col-5 {
            width: 5%;
        }
    </style>

</ui:define>

<ui:define name="content">
<div style="margin:5px;">
<h:form id="form">
<p:tabView id="tabView" style="font-weight:normal;font-style:normal" dynamic="true" cache="false">
<p:tab id="tab" title="财务公司定期存款数据">
    <p:growl id="msgs" showDetail="false" life="3000"/>

    <div id="header">
        <p:panel>
            <h:panelGrid columns="2" cellspacing="5" columnClasses="col-95,col-5">
                <h:panelGrid columns="2" cellspacing="5">
                    <h:outputLabel value="法人单位名称:" style="font-weight:bold;"/>
                    <p:inputText value="#{fixedDepositQryAction.corpName}" style="width: 220px"/>
                </h:panelGrid>
                <h:panelGrid>
                    <p:commandButton id="qrybtn" style="width:120px;" value="查询"
                                     action="#{fixedDepositQryAction.onQuery}"
                                     update="pdt,msgs">
                    </p:commandButton>

                    <!--
                                                            <p:commandButton ajax="false" id="btnExport" value="导出CSV"
                                                                             style="width:120px;">
                                                                <p:dataExporter type="csv" target="pdt"
                                                                                fileName="fdrpt"
                                                                                encoding="GBK"
                                                                                pageOnly="false"/>
                                                            </p:commandButton>
                    -->
                </h:panelGrid>
            </h:panelGrid>
        </p:panel>
    </div>

    <p:ajaxStatus style="height:20px;text-align:center">
        <f:facet name="start">
            <h:graphicImage value="/images/ajaxloadingbar.gif"/>
        </f:facet>
        <f:facet name="complete">
            <h:outputText value=""/>
        </f:facet>
    </p:ajaxStatus>

    <p:dataTable id="pdt" style="width:100%;"
                 value="#{fixedDepositQryAction.detlList}" var="record"
                 rowKey="#{record.pkid}"
                 editable="true" editMode="cell"
                 paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} "
                 currentPageReportTemplate="{startRecord}-{endRecord} 共{totalRecords}笔"
                 paginator="true" rows="30"
                 paginatorPosition="bottom"
                 rowsPerPageTemplate="500,100,50,30,15"
                 sortBy="#{record.corpName}"
                 emptyMessage="数据记录为空...">

        <p:column style="text-align:center">
            <f:facet name="header">
                法人单位名称
            </f:facet>
            <h:outputText value="#{record.corpName}"/>
        </p:column>
        <p:column style="text-align:center">
            <f:facet name="header">
                银行名称
            </f:facet>
            <h:outputText value="#{record.bankName}"/>
        </p:column>
        <p:column style="text-align:center">
            <f:facet name="header">
                账号
            </f:facet>
            <h:outputText value="#{record.actNum}"/>
        </p:column>
        <p:column style="text-align:center">
            <f:facet name="header">
                币种
            </f:facet>
            <h:outputText value="#{record.currName}"/>
        </p:column>
        <p:column style="text-align:center">
            <f:facet name="header">
                存单号
            </f:facet>
            <h:outputText value="#{record.voucherNum}"/>
        </p:column>
        <p:column sortBy="#{record.balamt}">
            <f:facet name="header">
                <h:outputText value="余额"/>
            </f:facet>
            <h:outputText value="#{record.balamt}" style="float: right">
                <f:convertNumber type="currency" currencySymbol=""/>
            </h:outputText>
        </p:column>
        <p:column sortBy="#{record.intRate}">
            <f:facet name="header">
                <h:outputText value="利率"/>
            </f:facet>
            <h:outputText value="#{record.intRate}" style="float: right">
                <f:convertNumber type="currency" currencySymbol=""/>
            </h:outputText>
        </p:column>

        <p:column style="text-align:center" sortBy="#{record.startDate}">
            <f:facet name="header">
                起息日
            </f:facet>
            <h:outputText value="#{record.startDate}"/>
        </p:column>
        <p:column style="text-align:center" sortBy="#{record.endDate}">
            <f:facet name="header">
                到期日
            </f:facet>
            <h:outputText value="#{record.endDate}"/>
        </p:column>
        <p:column style="text-align:center" sortBy="#{record.period}">
            <f:facet name="header">
                定期期限
            </f:facet>
            <h:outputText value="#{record.period}"/>
        </p:column>
    </p:dataTable>
</p:tab>
<p:tab id="tab2" title="财务公司定期存款数据(带小计)">
    <p:growl id="msgs2" showDetail="false" life="3000"/>

    <div>
        <p:panel>
            <h:panelGrid columns="2" cellspacing="5" columnClasses="col-95,col-5">
                <h:panelGrid columns="2" cellspacing="5">
                    <h:outputLabel value="法人单位名称:" style="font-weight:bold;"/>
                    <p:inputText value="#{fixedDepositQryAction.corpName}" style="width: 220px"/>
                </h:panelGrid>
                <h:panelGrid>
                    <p:commandButton id="qrybtn2" style="width:120px;" value="查询"
                                     action="#{fixedDepositQryAction.onQuery}"
                                     update="pdt2,msgs2">
                    </p:commandButton>

                    <!--
                                                            <p:commandButton ajax="false" id="btnExport" value="导出CSV"
                                                                             style="width:120px;">
                                                                <p:dataExporter type="csv" target="pdt"
                                                                                fileName="fdrpt"
                                                                                encoding="GBK"
                                                                                pageOnly="false"/>
                                                            </p:commandButton>
                    -->
                </h:panelGrid>
            </h:panelGrid>
        </p:panel>
    </div>

    <p:ajaxStatus style="height:20px;text-align:center">
        <f:facet name="start">
            <h:graphicImage value="/images/ajaxloadingbar.gif"/>
        </f:facet>
        <f:facet name="complete">
            <h:outputText value=""/>
        </f:facet>
    </p:ajaxStatus>

    <p:dataTable id="pdt2" style="width:100%;"
                 value="#{fixedDepositQryAction.detlList}" var="record"
                 rowKey="#{record.pkid}"
                 editable="true" editMode="cell"
                 paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} "
                 currentPageReportTemplate="{startRecord}-{endRecord} 共{totalRecords}笔"
                 paginator="true" rows="30"
                 paginatorPosition="bottom"
                 rowsPerPageTemplate="500,100,50,30,15"
                 sortBy="#{record.corpName}|#{record.currName}"
                 emptyMessage="数据记录为空...">

        <p:column style="text-align:center">
            <f:facet name="header">
                法人单位名称
            </f:facet>
            <h:outputText value="#{record.corpName}"/>
        </p:column>
        <p:column style="text-align:center">
            <f:facet name="header">
                银行名称
            </f:facet>
            <h:outputText value="#{record.bankName}"/>
        </p:column>
        <p:column style="text-align:center">
            <f:facet name="header">
                账号
            </f:facet>
            <h:outputText value="#{record.actNum}"/>
        </p:column>
        <p:column style="text-align:center">
            <f:facet name="header">
                币种
            </f:facet>
            <h:outputText value="#{record.currName}"/>
        </p:column>
        <p:column style="text-align:center">
            <f:facet name="header">
                存单号
            </f:facet>
            <h:outputText value="#{record.voucherNum}"/>
        </p:column>
        <p:column>
            <f:facet name="header">
                <h:outputText value="余额"/>
            </f:facet>
            <h:outputText value="#{record.balamt}" style="float: right">
                <f:convertNumber type="currency" currencySymbol=""/>
            </h:outputText>
        </p:column>
        <p:column sortBy="#{record.intRate}">
            <f:facet name="header">
                <h:outputText value="利率"/>
            </f:facet>
            <h:outputText value="#{record.intRate}" style="float: right">
                <f:convertNumber type="currency" currencySymbol=""/>
            </h:outputText>
        </p:column>

        <p:column style="text-align:center">
            <f:facet name="header">
                起息日
            </f:facet>
            <h:outputText value="#{record.startDate}"/>
        </p:column>
        <p:column style="text-align:center">
            <f:facet name="header">
                到期日
            </f:facet>
            <h:outputText value="#{record.endDate}"/>
        </p:column>
        <p:column style="text-align:center">
            <f:facet name="header">
                定期期限
            </f:facet>
            <h:outputText value="#{record.period}"/>
        </p:column>
        <p:summaryRow listener="#{fixedDepositQryAction.calculateTotal}">
            <p:column colspan="1" style="text-align:right">
                <h:outputText value="Total: "/>
                <h:outputText value="#{fixedDepositQryAction.total}">
                    <f:convertNumber type="currency" currencySymbol=""/>
                </h:outputText>
            </p:column>
        </p:summaryRow>
    </p:dataTable>
</p:tab>
<p:tab id="tab3" title="外部银行理财数据">
    <p:growl id="msgs3" showDetail="false" life="3000"/>

    <div>
        <p:panel>
            <h:panelGrid columns="2" cellspacing="5" columnClasses="col-95,col-5">
                <h:panelGrid>
                    <p:commandButton  style="width:120px;" value="查询"
                                     action="#{fixedDepositQryAction.onQuery}"
                                     update="pdt3,msgs3">
                    </p:commandButton>

                    <!--
                                                            <p:commandButton ajax="false"  value="导出CSV"
                                                                             style="width:120px;">
                                                                <p:dataExporter type="csv" target="pdt"
                                                                                fileName="fdrpt"
                                                                                encoding="GBK"
                                                                                pageOnly="false"/>
                                                            </p:commandButton>
                    -->
                </h:panelGrid>
            </h:panelGrid>
        </p:panel>
    </div>

    <p:ajaxStatus style="height:20px;text-align:center">
        <f:facet name="start">
            <h:graphicImage value="/images/ajaxloadingbar.gif"/>
        </f:facet>
        <f:facet name="complete">
            <h:outputText value=""/>
        </f:facet>
    </p:ajaxStatus>

    <p:dataTable id="pdt3" style="width:100%;"
                 value="#{fixedDepositQryAction.biDetlList}" var="record"
                 rowKey="#{record.pkid}"
                 paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} "
                 currentPageReportTemplate="{startRecord}-{endRecord} 共{totalRecords}笔"
                 paginator="true" rows="30"
                 paginatorPosition="bottom"
                 rowsPerPageTemplate="500,100,50,30,15"
                 sortBy="#{record.corpName}"
                 emptyMessage="数据记录为空...">

        <p:column style="text-align:center">
            <f:facet name="header">
                币种
            </f:facet>
            <h:outputText value="#{record.currName}"/>
        </p:column>
        <p:column sortBy="#{record.balamt}">
            <f:facet name="header">
                <h:outputText value="余额"/>
            </f:facet>
            <h:outputText value="#{record.balamt}" style="float: right">
                <f:convertNumber type="currency" currencySymbol=""/>
            </h:outputText>
        </p:column>
        <p:column sortBy="#{record.intRate}">
            <f:facet name="header">
                <h:outputText value="利率"/>
            </f:facet>
            <h:outputText value="#{record.intRate}" style="float: right">
                <f:convertNumber type="currency" currencySymbol=""/>
            </h:outputText>
        </p:column>

        <p:column style="text-align:center" sortBy="#{record.startDate}">
            <f:facet name="header">
                起息日
            </f:facet>
            <h:outputText value="#{record.startDate}"/>
        </p:column>
        <p:column style="text-align:center" sortBy="#{record.endDate}">
            <f:facet name="header">
                到期日
            </f:facet>
            <h:outputText value="#{record.endDate}"/>
        </p:column>
    </p:dataTable>

</p:tab>
</p:tabView>
</h:form>
</div>

</ui:define>
</ui:composition>